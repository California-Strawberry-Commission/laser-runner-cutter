<BackgroundColor@Widget>
    background_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<BackgroundLabel@Label+BackgroundColor>
    background_color: 1, 1, 1, 1

BoxLayout:
    orientation: "vertical"
    # Content
    BoxLayout:
        size_hint: 1, 0.9
        orientation: "horizontal"
        spacing: 5
        # UserInput
        BoxLayout:
            size_hint: 0.4, 1
            orientation: "vertical"
            spacing: 5
            Label:
                text: "Runner Image Capture"
                size_hint_y : None
                height: 40
                text_size: self.size
                halign: "center"
                valign: "middle"
                font_size: "20sp"
                bold: True
                color: 0, 0, 0, 1
            # SaveDir
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: 40
                Label:
                    text: "Save Directory:"
                    size_hint: 0.4, 1
                    text_size: self.size
                    halign: "center"
                    valign: "middle"
                    font_size: "16sp"
                    color: 0, 0, 0, 1
                TextInput:
                    multiline: False
                    size_hint: 0.6, 1
                    id: save_dir
            # FilePrefix
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: 40
                Label:
                    text: "File Prefix:"
                    size_hint: 0.4, 1
                    text_size: self.size
                    halign: "center"
                    valign: "middle"
                    font_size: "16sp"
                    color: 0, 0, 0, 1
                TextInput:
                    multiline: False
                    size_hint: 0.6, 1
                    id: file_prefix
            # Exposure
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: 40
                Label:
                    text: "Exposure (ms):"
                    size_hint: 0.4, 1
                    text_size: self.size
                    halign: "center"
                    valign: "middle"
                    font_size: "16sp"
                    color: 0, 0, 0, 1
                TextInput:
                    size_hint: 0.5, 1
                    multiline: False
                    input_filter: "float"
                    id: exposure_ms
                Button:
                    size_hint: 0.1, 1
                    text: "Apply"
                    on_release: app.on_exposure_apply_click()
            # ManualCapture
            Button:
                size_hint_y: None
                height: 40
                text: "Capture single frame"
                on_release: app.on_manual_capture_click()
            # IntervalCapture
            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: 40
                Label:
                    text: "Interval (s):"
                    size_hint: 0.4, 1
                    text_size: self.size
                    halign: "center"
                    valign: "middle"
                    font_size: "16sp"
                    color: 0, 0, 0, 1
                TextInput:
                    multiline: False
                    size_hint: 0.6, 1
                    input_filter: "float"
                    id: interval_s
            Button:
                size_hint_y: None
                height: 40
                text: "Start interval capture"
                id: interval_capture_button
                on_release: app.on_interval_capture_click()
            # Logs
            Label:
                text: "Logs"
                size_hint_y : None
                height: 30
                text_size: self.size
                halign: "center"
                valign: "middle"
                font_size: "18sp"
                bold: True
                color: 0, 0, 0, 1
            ScrollView:
                do_scroll_x: False
                Label:
                    font_size: "14sp"
                    size_hint: None, None
                    size: self.texture_size
                    color: 0, 0, 0, 1
                    id: logs
        # CameraPreview
        BoxLayout:
            orientation: "vertical"
            size_hint: 0.6, 1
            Image:
                id: camera_preview
            Label:
                size_hint: 1, 0.2
                text: "Camera not available"
                id: camera_status
                text_size: self.size
                halign: "center"
                valign: "middle"
                font_size: "18sp"
                color: 0, 0, 0, 1
    # Footer
    RelativeLayout:
        size_hint: 1, 0.1
        # BackButton
        Button:
            id: back_button
            background_color: 1, 1, 1, 1
            size_hint: None, None
            size: 100, 40
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            background_normal: "assets/back_button.png"
            on_release: app.on_back_click()
            Image:
                source: "assets/back_button_normal.png" if self.parent.state == "normal" else "assets/back_button_down.png"
                pos: self.parent.pos
                size: self.parent.size
